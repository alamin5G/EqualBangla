<!-- layout/main.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/head :: head}"></head>
<body>
<header th:replace="~{layout/navbar :: header}"></header>
<main class="container mt-4">
    <!--all content will be placed here-->
    <h2>Submit Injured Case</h2>

    <form action="/victims/submit-missing-form" method="post" th:object="${victim}" enctype="multipart/form-data">

        <div class="alert alert-danger" th:if="${#fields.hasErrors('*')}">
            <h5 class="text-danger">Validation Error</h5>
            <ul>
                <li th:each="err : ${#fields.errors('*')}" th:text="${err}" class="text-danger"></li>
            </ul>
        </div>

        <!-- Full Name Field -->
        <div class="mb-3">
            <label for="fullName" class="form-label">Full Name</label>
            <input type="text" class="form-control" id="fullName" th:field="*{fullName}" placeholder="Enter injured person's full name" required>
            <div th:if="${#fields.hasErrors('fullName')}" class="text-danger">
                <p th:errors="*{fullName}">Full name is required</p>
            </div>
        </div>

        <!-- Guardian's Name Field -->
        <div class="mb-3">
            <label for="guardianName" class="form-label">Guardian's Name</label>
            <input type="text" class="form-control" id="guardianName" th:field="*{guardianName}" required>
            <div th:if="${#fields.hasErrors('guardianName')}" class="text-danger">
                <p th:errors="*{guardianName}">Guardian's name is required</p>
            </div>
        </div>

        <!-- Gender Field -->
        <div class="mb-3">
            <label for="gender" class="form-label">Gender</label>
            <select class="form-select" id="gender" th:field="*{gender}" required>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select>
            <div th:if="${#fields.hasErrors('gender')}" class="text-danger">
                <p th:errors="*{gender}">Gender is required</p>
            </div>
        </div>

        <!-- Age Field -->
        <div class="mb-3">
            <label for="age" class="form-label">Age</label>
            <input type="number" class="form-control" id="age" th:field="*{age}" required>
            <div th:if="${#fields.hasErrors('age')}" class="text-danger">
                <p th:errors="*{age}">Age is required</p>
            </div>
        </div>


        <!-- Address Field -->
        <div class="mb-3">
            <label for="address" class="form-label">Address</label>
            <input type="text" class="form-control" id="address" th:field="*{address}" required>
            <div th:if="${#fields.hasErrors('address')}" class="text-danger">
                <p th:errors="*{address}">Address is required</p>
            </div>

            <label for="policeStation" class="form-label">Police Station</label>
            <input type="text" class="form-control" id="policeStation" th:field="*{policeStation}" required>
            <div th:if="${#fields.hasErrors('policeStation')}" class="text-danger">
                <p th:errors="*{policeStation}"></p>
            </div>
            <!-- District Field -->
            <div class="mb-3">
                <label for="district" class="form-label">Select District</label>
                <select class="form-select" id="district" th:field="*{district}">
                    <option value="">Select District</option>
                    <option value="Bagerhat">Bagerhat</option>
                    <option value="Bandarban">Bandarban</option>
                    <option value="Barguna">Barguna</option>
                    <option value="Barisal">Barisal</option>
                    <option value="Bhola">Bhola</option>
                    <option value="Bogra">Bogra</option>
                    <option value="Brahmanbaria">Brahmanbaria</option>
                    <option value="Chandpur">Chandpur</option>
                    <option value="Chittagong">Chittagong</option>
                    <option value="Chuadanga">Chuadanga</option>
                    <option value="Comilla">Comilla</option>
                    <option value="Cox's Bazar">Cox's Bazar</option>
                    <option value="Dhaka">Dhaka</option>
                    <option value="Dinajpur">Dinajpur</option>
                    <option value="Faridpur">Faridpur</option>
                    <option value="Feni">Feni</option>
                    <option value="Gaibandha">Gaibandha</option>
                    <option value="Gazipur">Gazipur</option>
                    <option value="Gopalganj">Gopalganj</option>
                    <option value="Habiganj">Habiganj</option>
                    <option value="Jamalpur">Jamalpur</option>
                    <option value="Jessore">Jessore</option>
                    <option value="Jhalokati">Jhalokati</option>
                    <option value="Jhenaidah">Jhenaidah</option>
                    <option value="Joypurhat">Joypurhat</option>
                    <option value="Khagrachari">Khagrachari</option>
                    <option value="Khulna">Khulna</option>
                    <option value="Kishoreganj">Kishoreganj</option>
                    <option value="Kurigram">Kurigram</option>
                    <option value="Kushtia">Kushtia</option>
                    <option value="Lakshmipur">Lakshmipur</option>
                    <option value="Lalmonirhat">Lalmonirhat</option>
                    <option value="Madaripur">Madaripur</option>
                    <option value="Magura">Magura</option>
                    <option value="Manikganj">Manikganj</option>
                    <option value="Maulvibazar">Maulvibazar</option>
                    <option value="Meherpur">Meherpur</option>
                    <option value="Munshiganj">Munshiganj</option>
                    <option value="Mymensingh">Mymensingh</option>
                    <option value="Naogaon">Naogaon</option>
                    <option value="Narail">Narail</option>
                    <option value="Narayanganj">Narayanganj</option>
                    <option value="Narsingdi">Narsingdi</option>
                    <option value="Natore">Natore</option>
                    <option value="Nawabganj">Nawabganj</option>
                    <option value="Netrokona">Netrokona</option>
                    <option value="Nilphamari">Nilphamari</option>
                    <option value="Noakhali">Noakhali</option>
                    <option value="Pabna">Pabna</option>
                    <option value="Panchagarh">Panchagarh</option>
                    <option value="Patuakhali">Patuakhali</option>
                    <option value="Pirojpur">Pirojpur</option>
                    <option value="Rajbari">Rajbari</option>
                    <option value="Rajshahi">Rajshahi</option>
                    <option value="Rangamati">Rangamati</option>
                    <option value="Rangpur">Rangpur</option>
                    <option value="Satkhira">Satkhira</option>
                    <option value="Shariatpur">Shariatpur</option>
                    <option value="Sherpur">Sherpur</option>
                    <option value="Sirajgonj">Sirajgonj</option>
                    <option value="Sunamganj">Sunamganj</option>
                    <option value="Sylhet">Sylhet</option>
                    <option value="Tangail">Tangail</option>
                    <option value="Thakurgaon">Thakurgaon</option>
                </select>
            </div>
        </div>

        <!-- Contact Number Field -->
        <div class="mb-3">
            <label for="phoneNumber" class="form-label">Contact Number</label>
            <input type="text" class="form-control" id="phoneNumber" th:field="*{phoneNumber}" required>
            <div th:if="${#fields.hasErrors('phoneNumber')}" class="text-danger">
                <p th:errors="*{phoneNumber}">Contact number is required</p>
            </div>
        </div>


        <!-- National ID Field -->
        <div class="mb-3">
            <label for="nationalId" class="form-label">National ID / Birth Certificate NO (make sure it is correct)</label>
            <input type="text" class="form-control" id="nationalId" th:field="*{nationalId}" required>
            <div th:if="${#fields.hasErrors('nationalId')}" class="text-danger">
                <p th:errors="*{nationalId}">National ID/Birth Certificate is required</p>
            </div>
        </div>

        <!-- Hidden Field for Incident Type -->
        <input type="hidden" th:field="*{incidentType}" name="incidentType" th:value="*{incidentType}"/>

        <!-- Incident Location Field -->
        <div class="mb-3">
            <label for="incidentLocation" class="form-label">Location of the Incident</label>
            <input type="text" class="form-control" id="incidentLocation" th:field="*{incidentLocation}" required>
            <div th:if="${#fields.hasErrors('incidentLocation')}" class="text-danger">
                <p th:errors="*{incidentLocation}">Incident location is required</p>
            </div>
        </div>

        <!-- Incident Date Field -->
        <div class="mb-3">
            <label for="incidentDate" class="form-label">Incident Date</label>
            <input type="date" class="form-control" id="incidentDate" th:field="*{incidentDate}" required>
            <div th:if="${#fields.hasErrors('incidentDate')}" class="text-danger">
                <p th:errors="*{incidentDate}">Incident date is required</p>
            </div>
        </div>

        <!-- Incident Description Field -->
        <div class="mb-3">
            <label for="incidentDescription" class="form-label">Incident Description</label>
            <textarea class="form-control" id="incidentDescription" th:field="*{incidentDescription}" required></textarea>
            <div th:if="${#fields.hasErrors('incidentDescription')}" class="text-danger">
                <p th:errors="*{incidentDescription}">Incident description is required</p>
            </div>
        </div>


        <!-- Additional Fields -->
        <!-- Email Field (Optional) -->
        <div class="mb-3">
            <label for="email" class="form-label">Email (Required)</label>
            <input type="email" class="form-control" id="email" th:field="*{email}">
            <div th:if="${#fields.hasErrors('email')}" class="text-danger">
                <p th:errors="*{email}">Email is required</p>
            </div>
        </div>

        <!-- Occupation Field (Optional) -->
        <div class="mb-3">
            <label for="occupation" class="form-label">Occupation (Optional)</label>
            <input type="text" class="form-control" id="occupation" th:field="*{occupation}">
            <div th:if="${#fields.hasErrors('occupation')}" class="text-danger">
                <p th:errors="*{occupation}">Occupation is required</p>
            </div>
        </div>

        <!-- Participation Role Field -->
        <div class="mb-3">
            <label for="participationRole" class="form-label">Participation Role</label>
            <select class="form-select" id="participationRole" th:field="*{participationRole}">
                <option value="">Select Role</option>
                <option value="Protester">Protester</option>
                <option value="Supporter">Supporter</option>
                <option value="Bystander">Bystander</option>
            </select>
            <div th:if="${#fields.hasErrors('participationRole')}" class="text-danger">
                <p th:errors="*{participationRole}">Participation Role is required</p>
            </div>
        </div>

        <!-- Police Case Reference Field -->
        <div class="mb-3">
            <label for="policeCaseReference" class="form-label">Police Case Reference (Optional)</label>
            <input type="text" class="form-control" id="policeCaseReference" th:field="*{policeCaseReference}">
        </div>


<!--Missing Fields-->

        <!-- Physical Description -->
        <div class="mb-3">
            <label for="physicalDescription" class="form-label">Physical Description</label>
            <textarea class="form-control" id="physicalDescription" th:field="*{missingDetails.physicalDescription}" placeholder="Enter height, complexion, and unique identifiers" required></textarea>
            <div th:if="${#fields.hasErrors('missingDetails.physicalDescription')}" class="text-danger">
                <p th:errors="*{missingDetails.physicalDescription}">Physical description is required</p>
            </div>
        </div>

        <!-- Last Seen Location -->
        <div class="mb-3">
            <label for="lastSeenLocation" class="form-label">Last Seen Location</label>
            <input type="text" class="form-control" id="lastSeenLocation" th:field="*{missingDetails.lastSeenLocation}" placeholder="Enter the last known location" required>
            <div th:if="${#fields.hasErrors('missingDetails.lastSeenLocation')}" class="text-danger">
                <p th:errors="*{missingDetails.lastSeenLocation}">Last seen location is required</p>
            </div>
        </div>

        <!-- Date Last Contacted -->
        <div class="mb-3">
            <label for="dateLastContacted" class="form-label">Date Last Contacted</label>
            <input type="date" class="form-control" id="dateLastContacted" th:field="*{missingDetails.dateLastContacted}" required>
            <div th:if="${#fields.hasErrors('missingDetails.dateLastContacted')}" class="text-danger">
                <p th:errors="*{missingDetails.dateLastContacted}">Date of last contact is required</p>
            </div>
        </div>

        <!-- Witness Account -->
        <div class="mb-3">
            <label for="witnessAccount" class="form-label">Witness Account</label>
            <textarea class="form-control" id="witnessAccount" th:field="*{missingDetails.witnessAccount}" placeholder="Description of last sighting or any witness accounts" required></textarea>
            <div th:if="${#fields.hasErrors('missingDetails.witnessAccount')}" class="text-danger">
                <p th:errors="*{missingDetails.witnessAccount}">Witness account is required</p>
            </div>
        </div>

        <!-- Relationship with Last Contact -->
        <div class="mb-3">
            <label for="relationshipWithLastContact" class="form-label">Relationship with Last Contact</label>
            <input type="text" class="form-control" id="relationshipWithLastContact" th:field="*{missingDetails.relationshipWithLastContact}" placeholder="Friend, colleague, etc." required>
            <div th:if="${#fields.hasErrors('missingDetails.relationshipWithLastContact')}" class="text-danger">
                <p th:errors="*{missingDetails.relationshipWithLastContact}">Relationship with last contact is required</p>
            </div>
        </div>

        <!-- Authorities Notified -->
        <div class="mb-3">
            <label for="authoritiesNotified" class="form-label">Were authorities notified?</label>
            <select class="form-select" id="authoritiesNotified" th:field="*{missingDetails.authoritiesNotified}" required>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
            <div th:if="${#fields.hasErrors('missingDetails.authoritiesNotified')}" class="text-danger">
                <p th:errors="*{missingDetails.authoritiesNotified}">This field is required</p>
            </div>
        </div>

        <!-- Photograph Upload -->

        <!-- Death Photo Upload -->
        <div class="mb-3">
            <label for="missingPhoto" class="form-label">Missing Persons Photo (Required) <a th:href="@{/file-upload-instruction}">Follow the instruction before upload the file</a> </label>
            <input type="file" id="missingPhoto" name="missingDetails.missingPhotographFile" class="form-control" th:field="*{missingDetails.missingPhotographFile}" accept=".jpg, .jpeg, .png">
            <div class="text-danger" th:if="${#fields.hasErrors('missingDetails.missingPhotographFile')}" th:errors="*{missingDetails.missingPhotographFile}"></div>
        </div>

        <!-- Death Certificate Upload -->
        <div class="mb-3">
            <label for="policeReport" class="form-label">Missing Report /GD (if available) <a th:href="@{/file-upload-instruction}">Follow the instruction before upload the file</a> </label>
            <input type="file" id="policeReport" name="missingDetails.policeReportFile" class="form-control" th:field="*{missingDetails.policeReportFile}" accept=".pdf">
            <div class="text-danger" th:if="${#fields.hasErrors('missingDetails.policeReportFile')}" th:errors="*{missingDetails.policeReportFile}"></div>
        </div>


        <!-- Contact Person Information -->
        <h4>Contact Person Information</h4>
        <div class="mb-3">
            <label for="contactPersonName" class="form-label">Contact Person Name</label>
            <input type="text" class="form-control" id="contactPersonName" th:field="*{contactName}" required>
            <div th:if="${#fields.hasErrors('contactName')}" class="text-danger">
                <p th:errors="*{contactName}">Contact person name is required</p>
            </div>
        </div>

        <div class="mb-3">
            <label for="contactPersonRelationship" class="form-label">Relationship to Victim</label>
            <input type="text" class="form-control" id="contactPersonRelationship" th:field="*{relationshipToVictim}" required>
            <div th:if="${#fields.hasErrors('relationshipToVictim')}" class="text-danger">
                <p th:errors="*{relationshipToVictim}">Relationship to the victim is required</p>
            </div>
        </div>

        <div class="mb-3">
            <label for="contactPersonPhoneNumber" class="form-label">Contact Person Phone Number</label>
            <input type="text" class="form-control" id="contactPersonPhoneNumber" th:field="*{contactPhone}" required>
            <div th:if="${#fields.hasErrors('contactPhone')}" class="text-danger">
                <p th:errors="*{contactPhone}">Phone number is required</p>
            </div>
        </div>

        <div class="mb-3">
            <label for="contactPersonAddress" class="form-label">Contact Person Address</label>
            <input type="text" class="form-control" id="contactPersonAddress" th:field="*{contactAddress}" required>
            <div th:if="${#fields.hasErrors('contactAddress')}" class="text-danger">
                <p th:errors="*{contactAddress}">Phone number is required</p>
            </div>
        </div>

        <!-- Optional fields for Contact Person -->
        <div class="mb-3">
            <label for="contactEmail" class="form-label">Contact Person Email (Optional)</label>
            <input type="email" class="form-control" id="contactEmail" th:field="*{contactEmail}">
        </div>

        <div class="mb-3">
            <label for="identificationDocument" class="form-label">Identification Document (Optional)</label>
            <input type="text" class="form-control" id="identificationDocument" th:field="*{contactIdentificationDocument}">
        </div>

        <button type="submit" class="btn btn-primary">Submit Injured Case</button>
    </form>


</main>
<footer th:replace="~{layout/footer :: footer}"></footer>
</body>
</html>
