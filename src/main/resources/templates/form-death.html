<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Death Case</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2>Submit Death Case</h2>

    <!-- Bind the form to the 'victim' object -->
    <form action="/victims/submit-death-form" method="post" th:object="${victim}" enctype="multipart/form-data">
        <div class="alert alert-danger" th:if="${#fields.hasErrors('*')}">
            <ul>
                <li th:each="err : ${#fields.errors('*')}" th:text="${err}" class="text-danger"></li>
            </ul>
        </div>
        <!-- Hidden Field for Incident Type -->
        <input type="hidden" th:field="*{incidentType}" value="Death" />
        <input type="hidden" th:field="*{deathDetails.deathCertificatePath}" value="uploads/death-certificates/">

        <!-- Full Name Field -->
        <div class="mb-3">
            <label for="fullName" class="form-label">Full Name</label>
            <input type="text" class="form-control" id="fullName" th:field="*{fullName}" placeholder="Enter full name" required>
            <div th:if="${#fields.hasErrors('fullName')}" class="text-danger">
                <p th:errors="*{fullName}"></p>
            </div>
        </div>

        <!-- Guardian's Name Field -->
        <div class="mb-3">
            <label for="guardianName" class="form-label">Guardian's Name</label>
            <input type="text" class="form-control" id="guardianName" th:field="*{guardianName}" required>
            <div th:if="${#fields.hasErrors('guardianName')}" class="text-danger">
                <p th:errors="*{guardianName}"></p>
            </div>
        </div>

        <!-- Gender Field -->
        <div class="mb-3">
            <label for="gender" class="form-label">Gender</label>
            <select class="form-select" id="gender" th:field="*{gender}" required>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select>
            <div th:if="${#fields.hasErrors('gender')}" class="text-danger">
                <p th:errors="*{gender}"></p>
            </div>
        </div>

        <!-- Age Field -->
        <div class="mb-3">
            <label for="age" class="form-label">Age</label>
            <input type="number" class="form-control" id="age" th:field="*{age}" required>
            <div th:if="${#fields.hasErrors('age')}" class="text-danger">
                <p th:errors="*{age}"></p>
            </div>
        </div>

        <!-- Contact Number Field -->
        <div class="mb-3">
            <label for="contactNumber" class="form-label">Contact Number</label>
            <input type="text" class="form-control" id="contactNumber" th:field="*{contactNumber}" required>
            <div th:if="${#fields.hasErrors('contactNumber')}" class="text-danger">
                <p th:errors="*{contactNumber}"></p>
            </div>
        </div>

        <!-- Address Field -->
        <div class="mb-3">
            <label for="address" class="form-label">Address</label>
            <input type="text" class="form-control" id="address" th:field="*{address}" required>
            <div th:if="${#fields.hasErrors('address')}" class="text-danger">
                <p th:errors="*{address}"></p>
            </div>
        </div>

        <!-- National ID Field -->
        <div class="mb-3">
            <label for="nationalId" class="form-label">National ID / Birth Certificate</label>
            <input type="text" class="form-control" id="nationalId" th:field="*{nationalId}" required>
            <div th:if="${#fields.hasErrors('nationalId')}" class="text-danger">
                <p th:errors="*{nationalId}"></p>
            </div>
        </div>

        <!-- Incident Location Field -->
        <div class="mb-3">
            <label for="incidentLocation" class="form-label">Location of the Incident</label>
            <input type="text" class="form-control" id="incidentLocation" th:field="*{incidentLocation}" required>
            <div th:if="${#fields.hasErrors('incidentLocation')}" class="text-danger">
                <p th:errors="*{incidentLocation}"></p>
            </div>
        </div>

        <!-- Incident Date Field -->
        <div class="mb-3">
            <label for="incidentDate" class="form-label">Incident Date</label>
            <input type="date" class="form-control" id="incidentDate" th:field="*{incidentDate}" required>
            <div th:if="${#fields.hasErrors('incidentDate')}" class="text-danger">
                <p th:errors="*{incidentDate}"></p>
            </div>
        </div>

        <!-- Incident Description Field -->
        <div class="mb-3">
            <label for="incidentDescription" class="form-label">Incident Description</label>
            <textarea class="form-control" id="incidentDescription" th:field="*{incidentDescription}" required></textarea>
            <div th:if="${#fields.hasErrors('incidentDescription')}" class="text-danger">
                <p th:errors="*{incidentDescription}"></p>
            </div>
        </div>

        <!-- Additional Fields -->
        <!-- Email Field (Optional) -->
        <div class="mb-3">
            <label for="email" class="form-label">Email (Optional)</label>
            <input type="email" class="form-control" id="email" th:field="*{email}">
        </div>

        <!-- Occupation Field (Optional) -->
        <div class="mb-3">
            <label for="occupation" class="form-label">Occupation (Optional)</label>
            <input type="text" class="form-control" id="occupation" th:field="*{occupation}">
        </div>

        <!-- Participation Role Field -->
        <div class="mb-3">
            <label for="participationRole" class="form-label">Participation Role</label>
            <select class="form-select" id="participationRole" th:field="*{participationRole}">
                <option value="">Select Role</option>
                <option value="Protester">Protester</option>
                <option value="Supporter">Supporter</option>
                <option value="Bystander">Bystander</option>
            </select>
        </div>

        <!-- Police Case Reference Field -->
        <div class="mb-3">
            <label for="policeCaseReference" class="form-label">Police Case Reference (Optional)</label>
            <input type="text" class="form-control" id="policeCaseReference" th:field="*{policeCaseReference}">
        </div>

        <!--death fields-->
        <!-- Cause of Death -->
        <div class="mb-3">
            <label for="causeOfDeath" class="form-label">Cause of Death</label>
            <input type="text" id="causeOfDeath" name="causeOfDeath" class="form-control" th:field="*{deathDetails.causeOfDeath}" placeholder="Enter cause of death" required>
            <div class="text-danger" th:if="${#fields.hasErrors('deathDetails.causeOfDeath')}" th:errors="*{deathDetails.causeOfDeath}"></div>
        </div>

        <!-- Date of Death -->
        <div class="mb-3">
            <label for="dateOfDeath" class="form-label">Date of Death</label>
            <input type="date" id="dateOfDeath" name="dateOfDeath" class="form-control" th:field="*{deathDetails.dateOfDeath}" required>
            <div class="text-danger" th:if="${#fields.hasErrors('deathDetails.dateOfDeath')}" th:errors="*{deathDetails.dateOfDeath}"></div>
        </div>

        <!-- Time of Death (Optional) -->
        <div class="mb-3">
            <label for="timeOfDeath" class="form-label">Time of Death (Optional)</label>
            <input type="time" id="timeOfDeath" name="timeOfDeath" class="form-control" th:field="*{deathDetails.timeOfDeath}">
            <div class="text-danger" th:if="${#fields.hasErrors('deathDetails.timeOfDeath')}" th:errors="*{deathDetails.timeOfDeath}"></div>
        </div>

        <!-- Burial or Cremation Details -->
        <div class="mb-3">
            <label for="burialCremationDetails" class="form-label">Burial/Cremation Details</label>
            <textarea id="burialCremationDetails" name="burialCremationDetails" class="form-control" rows="3" th:field="*{deathDetails.burialCremationDetails}" placeholder="Enter burial/cremation details" required></textarea>
            <div class="text-danger" th:if="${#fields.hasErrors('deathDetails.burialCremationDetails')}" th:errors="*{deathDetails.burialCremationDetails}"></div>
        </div>

        <!-- Witness Account -->
        <div class="mb-3">
            <label for="witnessAccount" class="form-label">Witness Account</label>
            <textarea id="witnessAccount" name="witnessAccount" class="form-control" rows="3" th:field="*{deathDetails.witnessAccount}" placeholder="Enter witness account"></textarea>
            <div class="text-danger" th:if="${#fields.hasErrors('deathDetails.witnessAccount')}" th:errors="*{deathDetails.witnessAccount}"></div>
        </div>

        <!-- Autopsy Performed -->
        <div class="mb-3">
            <label class="form-label">Autopsy Performed?</label>
            <div class="form-check">
                <input type="radio" id="autopsyYes" name="deathDetails.autopsyPerformed"  value="true" class="form-check-input" th:field="*{deathDetails.autopsyPerformed}">
                <label for="autopsyYes" class="form-check-label">Yes</label>
            </div>
            <div class="form-check">
                <input type="radio" id="autopsyNo" name="deathDetails.autopsyPerformed" value="false" class="form-check-input" th:field="*{deathDetails.autopsyPerformed}">
                <label for="autopsyNo" class="form-check-label">No</label>
            </div>
            <div class="text-danger" th:if="${#fields.hasErrors('deathDetails.autopsyPerformed')}" th:errors="*{deathDetails.autopsyPerformed}"></div>
        </div>
        <!-- Death Certificate Upload -->
        <div class="mb-3">
            <label for="deathCertificate" class="form-label">Death Certificate (Optional)</label>
            <input type="file" id="deathCertificate" name="deathDetails.deathCertificateFile" class="form-control" th:field="*{deathDetails.deathCertificateFile}" accept=".pdf,.jpg,.png">
            <div class="text-danger" th:if="${#fields.hasErrors('deathDetails.deathCertificateFile')}" th:errors="*{deathDetails.deathCertificateFile}"></div>
        </div>

        <!-- Contact Person Information -->
        <h4>Contact Person Information</h4>
        <div class="mb-3">
            <label for="contactPersonName" class="form-label">Contact Person Name</label>
            <input type="text" class="form-control" id="contactPersonName" th:field="*{conatactName}" required>
            <div th:if="${#fields.hasErrors('conatactName')}" class="text-danger">
                <p th:errors="*{conatactName}">Contact person name is required</p>
            </div>
        </div>

        <div class="mb-3">
            <label for="contactPersonRelationship" class="form-label">Relationship to Victim</label>
            <input type="text" class="form-control" id="contactPersonRelationship" th:field="*{relationshipToVictim}" required>
            <div th:if="${#fields.hasErrors('relationshipToVictim')}" class="text-danger">
                <p th:errors="*{relationshipToVictim}">Relationship to the victim is required</p>
            </div>
        </div>

        <div class="mb-3">
            <label for="contactPersonPhoneNumber" class="form-label">Contact Person Phone Number</label>
            <input type="text" class="form-control" id="contactPersonPhoneNumber" th:field="*{contactPhone}" required>
            <div th:if="${#fields.hasErrors('contactPhone')}" class="text-danger">
                <p th:errors="*{contactPhone}">Phone number is required</p>
            </div>
        </div>

        <div class="mb-3">
            <label for="contactPersonAddress" class="form-label">Contact Person Address</label>
            <input type="text" class="form-control" id="contactPersonAddress" th:field="*{contactAddress}" required>
            <div th:if="${#fields.hasErrors('contactAddress')}" class="text-danger">
                <p th:errors="*{contactAddress}">Phone number is required</p>
            </div>
        </div>

        <!-- Optional fields for Contact Person -->
        <div class="mb-3">
            <label for="contactEmail" class="form-label">Contact Person Email (Optional)</label>
            <input type="email" class="form-control" id="contactEmail" th:field="*{contactEmail}">
        </div>

        <div class="mb-3">
            <label for="identificationDocument" class="form-label">Identification Document (Optional)</label>
            <input type="text" class="form-control" id="identificationDocument" th:field="*{contactIdentificationDocument}">
        </div>


        <button type="submit" class="btn btn-primary">Submit Death Case</button>
    </form>
</div>
</body>
</html>
