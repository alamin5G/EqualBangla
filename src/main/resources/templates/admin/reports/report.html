<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/head :: head}">
  <title>Victim Data Reports</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<header th:replace="~{layout/navbar :: header}"></header>
<main class="container mt-4">
  <h2>Victim Data Reports</h2>

  <!-- Incident Type Distribution Chart -->
  <h3>Incident Type Distribution</h3>
  <canvas id="incidentTypeChart"></canvas>

  <!-- Cases Over Time Chart -->
  <h3>Cases Over Time</h3>
  <canvas id="casesOverTimeChart"></canvas>

  <!-- Cases by Location Chart -->
  <h3>Cases by Location</h3>
  <canvas id="casesByLocationChart"></canvas>

  <!-- Verification Status Chart -->
  <h3>Verification Status</h3>
  <canvas id="verificationStatusChart"></canvas>
</main>
<footer th:replace="~{layout/footer :: footer}"></footer>

<script>
  // Incident Type Distribution Chart
  var incidentTypeCtx = document.getElementById('incidentTypeChart').getContext('2d');
  new Chart(incidentTypeCtx, {
    type: 'pie',
    data: {
      labels: [[${incidentTypeStats.keySet()}]], // Thymeleaf expression to pass data
      datasets: [{
        data: [[${incidentTypeStats.values()}]], // Thymeleaf expression to pass data
        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'],
      }]
    }
  });

  // Cases Over Time Chart
  var casesOverTimeCtx = document.getElementById('casesOverTimeChart').getContext('2d');
  new Chart(casesOverTimeCtx, {
    type: 'bar',
    data: {
      labels: [[${timeLabels}]], // Thymeleaf expression to pass data
      datasets: [{
        label: 'Cases Over Time',
        data: [[${timeData}]], // Thymeleaf expression to pass data
        backgroundColor: '#36A2EB',
      }]
    }
  });

  // Cases by Location Chart
  var casesByLocationCtx = document.getElementById('casesByLocationChart').getContext('2d');
  new Chart(casesByLocationCtx, {
    type: 'bar',
    data: {
      labels: [[${locationLabels}]], // Thymeleaf expression to pass data
      datasets: [{
        label: 'Cases by Location',
        data: [[${locationData}]], // Thymeleaf expression to pass data
        backgroundColor: '#FFCE56',
      }]
    }
  });

  // Verification Status Chart
  var verificationStatusCtx = document.getElementById('verificationStatusChart').getContext('2d');
  new Chart(verificationStatusCtx, {
    type: 'pie',
    data: {
      labels: ['Verified', 'Unverified'],
      datasets: [{
        data: [[${verificationStats}]], // Thymeleaf expression to pass data
        backgroundColor: ['#4CAF50', '#F44336'],
      }]
    }
  });
</script>
</body>
</html>
